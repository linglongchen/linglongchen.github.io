# 关于架构设计的一点总结

作者： 陈汤姆
<br/>博客：[https://github.com/linglongchen/linglongchen.github.io](https://github.com/linglongchen/linglongchen.github.io)

>自我学习的积累！😄


## 背景
日常开发工作中应用架构都是提前搭好的，日常开发都是基于架构的标准做开发（俗称打螺丝），但是开发CRUD过程中针对自己所使用的架构空闲时间也会做梳理和理解，在梳理过程中以及阅读架构相关的文档积累了一些相关知识，作为自己后续的知识点。


## 架构的定义
**软件架构**是有关软件整体结构与组件的抽象描述，用于指导大型软件系统各个方面的设计。软件架构会包括[软件组件](https://zh.wikipedia.org/wiki/%E8%BB%9F%E4%BB%B6%E7%B5%84%E4%BB%B6 "软件组件")、组件之间的关系，组件特性以及组件间关系的特性[[1]]。软件架构可以和建筑物的[架构](https://zh.wikipedia.org/wiki/%E5%BB%BA%E7%AD%91 "建筑")相比拟。软件架构是构建[计算机软件](https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%BD%AF%E4%BB%B6 "计算机软件")，开发系统以及计划进行的基础，可以列出开发团队需要完成的任务。（来自维基百科）

个人理解：软件架构就是组成软件的模块+模块之间的关系+开发原则和指南。

理解案例：
以目前我开发的物流协同平台为例，整个平台的架构设计如下：

##### 四个模块应用：
- 网关对接模块：协同平台对外的数据出入系统，承载整个协同层的数据收发
- 协同中心模块：通过调度任务+MQ构建协同中心的分发数据的功能，可以根据任务的优先级实现不同的分发模式。降低数据链路复杂度。提升数据协同效率。
- 业务适配模块：通过单独抽取业务适配模块，将底层的协同功能和业务逻辑完全隔离，并抽象核心链路，日常开发只要开发对应的业务适配层，底层调度无需感知，提升日常业务开发效率。
- 基础业务数据模块：通过抽取业务数据模块，将CRUD操作集成在单独应用中，实现业务逻辑和数据操作的隔离，提升数据操作的复用性和业务逻辑的清晰度。

![Untitled Diagram-Page-2.jpg](https://s2.loli.net/2024/08/24/lGwEQJ8NoarRVAC.jpg)
##### 模块的关系
关于四个模块的关系，四个模块之间通过RPC通信。

##### 开发原则和指南
架构设计之初架构师定义好了一套开发准则，包含项目约定如下：
- 模块命名规则
	- xxx-biz：业务逻辑处理模块
	- xxx-api：对外服务模块
	- xxx-dal：数据层模块
	- xxx-common：通用模块，全局使用
	- xxx-starter：应用入口
	- xxx-web：前端页面交互模块
	- xxx-test：单元测试模块
- 包命名
	- utils
	- helper
	- config
	- enums
	- common
	- constants
	- processor
	- dal
- 类命名
	- xxxService：单业务流程处理类
	- xxxManager：跨业务公用的处理类，聚合多个mapper
	- xxxApi：对外提供服务类
	- xxxAdapter：调用外部服务时通过Adapter封装
	- xxxClient：中间件公用模块封装类，redis、http、mongoDB
	- xxxProcessor：处理流程相关的类
	- xxxVO：跟前端交互的类
	- xxxDTO：业务处理过程中的中转类
	- xxxConfig：配置类
	- xxxEnum：枚举类
	- xxxHelper：单一功能的工具类
	- xxxBuilder：单一功能的工具类
	- xxxProducer：MQ的生产者类
	- xxxConsumer：MQ的消费者类
- 类依赖关系
	- 
- 版本约定
	- 对外提供的api模块版本号要按照约定升级，对外使用RELEASE
- pom依赖包准则
	- 约定使用稳定版本的starter

![.jpg](https://s2.loli.net/2024/08/24/caTUL6bQJ2m5FCv.jpg)
## 架构的组成

- 模块
- 模块的通信
- 设计原则

## 架构的本质
约定整体和部分、部分和部分之间的关系，并通过一定的约束使得整体的发展更加稳定。


## 架构的分类

### 业务架构
- 关注业务发展、业务价值、业务流程、业务模型，从业务角度一层一层分解业务核心点和流程，因此业务架构更多的是学会分解业务。
### 应用架构
- 关注应用建设、应用划分、应用边界，需要对应用以及内在的模块做抽象，因此应用架构更多的是要学会抽象。
### 技术架构
- 关注技术选型、框架搭建、DevOps、微服务、容器化、部署架构等，因此技术架构更多的关注技术的合理运用。
![Untitled Diagram-Page-3.jpg](https://s2.loli.net/2024/08/25/IO4mqvnwgWEuQZt.jpg)
## 升级架构需要考虑的因素

![Dingtalk_20240825224852.jpg](https://s2.loli.net/2024/08/25/r7mZiQyth36KoHX.jpg)
- 业务需求：关注在在于以业务需求为出发点，解决业务核心问题，提升业务迭代效率
- 扩展性：关注点在于架构能否跟得上业务的发展，一般架构的设计都有一定的时间期限，比如满足业务3年或者五年的发展。
- 复杂度：关注点为整个架构的模块、关系、基本原则是否可以将复杂度圈定在可控范围内
- 稳定性：设计的架构要足够稳定，稳定主要体现在满足几个9，即SLA。
- 可用性：在正常业务场景下架构能够达到预期的目标，尽可能的对外提供正常的服务
- 上手度：关注点在于架构的上手复杂度，架构的设计在满足业务发展前提下要尽可能简单。新人上手开发需要几个人日是衡量架构上手度的标准。



## 再谈复杂度
只要是软件开发都绕不开复杂度，复杂度不会为0，只能是低或者高，因此架构师设计的架构就是通过和其它人的沟通交流，将整个架构划按照业务的发展划分合理的模块、设计模块之间的通信、梳理架构开发的基本准则，通过这种方式将复杂度圈定在一定范围内，避免复杂度不可控最终架构演变为不可维护的架构。


因此复杂度是影响架构生存几年的基本要素，架构设计时要核心关注复杂度，不能为了适配业务而放弃复杂度的控制，架构师要从业务发展和架构发展找到复杂度的平衡点，实现即满足业务又可以将复杂度控制在一定范围，保障架构支撑业务发展n年。


合理的架构复杂度增长曲线
![Dingtalk_20240825222255.jpg](https://s2.loli.net/2024/08/25/6H94qu21ZbeERaG.jpg)

不合理的架构复杂度增长曲线
![Dingtalk_20240825222544.jpg](https://s2.loli.net/2024/08/25/xEYMuqfXv5SWDpQ.jpg)
## 如何拆分复杂问题并输出合理的架构方案


#### 确认目标，即要解决什么问题，达到什么指标
前期确认解决复杂问题的目标，解决复杂问题最终达到的目标
#### 确认核心概念，即梳理复杂问题中所有的核心概念，全域达成一致
梳理复杂问题涉及的核心概念，这是不能被忽视的点，一定要对齐概念，和各域所有的人达成一致性，不能造成每个人对于一个概念的理解不同，导致问题出现分歧。
#### 梳理现有方案逻辑
梳理现有的解决方案，找到现有解决方案对于解决问题出现的瓶颈。
#### 从现有方案中找到瓶颈问题点
找到瓶颈，确立核心问题，开始以该问题作为出发点探寻新的解决方案
#### 输出目标方案
确定解决方案，输出可行性方案，并最终确定实现方案，给出合理的架构方案

## 架构的设计原则
- 确立核心问题
- 复杂问题简单化
- 统一语言
- 确立应用、模型、边界、关系、基本原则
- 未来的扩展能力
- 遵循设计模式（核心为高内聚低耦合）

## 架构解决方案
- 领域驱动设计
- 微服务架构
- 云原生架构
- 大数据架构


# 总结
以上就是关于架构的一些总结，有一些观点来自平时的积累，如果涉及其他人的版权，请联系我加引用。